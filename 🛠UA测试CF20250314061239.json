[
  {
    "bookSourceComment": "//一.作者:九梦\n//二.此书源用于测试UA过盾率\n\n//三.注意，确认CookieJar已开启，否则可能出现成功后源码依然显示CF而导致被误判为失败，这会影响测试！！！\n\n//                     =<四.关于如何使用>=\n//<1.可以在登录界面设置想要测试的ua或者包含ua的请求头，留空或无效结果会视为选择使用随机ua>\n//<2.随机ua参数支持三种格式\n//参数1,参数2\n//\"参数1\",\"参数2\"\n//'参数1','参数2'\n//.参数1:(留空随机)，电脑，安卓，苹果，鸿蒙，oppo，vivo，小米，华为，三星，一加，魅族，努比亚，realme\n//..参数2:(留空随机)，高兼容，高版本\n//...两个参数可同时为空，此时完全随机>\n//<3.将有CF盾的页面URL作为正文页校验>\n\n//五.成功的请求头将出现在书源变量，请及时复制并保存，否则可能会被刷新\n",
    "bookSourceGroup": "",
    "bookSourceName": "🛠UA测试CF",
    "bookSourceType": 0,
    "bookSourceUrl": "九梦吖",
    "customOrder": -99878,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "header": "<js>\nsz=java.get('sz');\nsz=sz.match(/Mozilla\\/5.0[^\"'\\}]+/);\nzs=java.get('zs');\nif (zs==\"\"){zs=\"'',''\"}\nms=java.get('ms')\nif (ms!=\"\"){\n\tif (ms==\"dy\"){\n\t\tif (sz){sz=sz[0]}else{sz=\"\"}\n\t\tif (sz==\"\"){\n\t\t\tms=\"sj\"\n\t\t\tjava.put('ms',ms)\n\t\t\tzslist=zs.split(\",\");\n\t\t\tzs1=zslist[0].replace(\"'\",\"\");\n\t\t\tzs2=zslist[1].replace(\"'\",\"\");\n\t\t\tzs1=String(zs1)\n\t\t\tzs2=String(zs2)\n\t\t\tua=generateUserAgent(zs1,zs2);\n//随机生成ua\n\t\t\t}else{\n\t\t\tua=sz;\n\t\t\t}\n\t\t}else if(ms==\"sj\"){\n\t\t\tzslist=zs.split(\",\");\n\t\t\tzs1=zslist[0].replace(\"'\",\"\");\n\t\t\tzs2=zslist[1].replace(\"'\",\"\");\n\t\t\tzs1=String(zs1)\n\t\t\tzs2=String(zs2)\n\t\t\tua=generateUserAgent(zs1,zs2);\n\t\t\t//随机生成ua\n\t\t}\nvar JC=\"ok\";\njava.put('JC',JC)\n}else{\njava.longToast(\"\\n😇第一次用必须在登录界面设置模式😇\")\njava.log(\"\\n😇第一次用必须在登录界面设置模式😇\")\nvar JC=\"no\";\njava.put('JC',JC)\n}\n//下面除ua变量之外全部可自定义，大部分已被注释掉，删除//可启用\nvar headers = {\n  // 最常用请求头↓\n  'User-Agent': ua,\n  // 用户代理，标识客户端\n  //'Host': 'www.example.com',\n  // 目标主机\n   //'Origin': 'https://www.example.com',\n  // 请求来源\n  //'Referer': 'https://www.example.com/page',\n  // 来源页面\n  //'Sec-CH-UA-Platform': 'Android',\n  // 客户端平台Android, Windows, iOS, macOS, Linux, Chrome OS\n  //'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',\n  // 接受的内容类型\n  //'Accept-Language': 'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7',\n  // 接受的语言\n  //'Accept-Encoding': 'gzip, deflate, br',\n  // 接受的编码\n  //'Connection': 'keep-alive',\n  // 连接类型\n\n  // 基本请求头↓\n  //'Accept-Charset': 'utf-8',\n  // 接受的字符集\n  //'Cache-Control': 'no-cache',\n  // 缓存控制\n  //'Pragma': 'no-cache',\n  // 兼容 HTTP/1.0 的缓存控制\n\n  // 其他请求头↓\n  //'Upgrade-Insecure-Requests': '1',\n  // 自动升级 HTTP 请求到 HTTPS\n  //'Sec-Fetch-Mode': 'navigate',\n  // 请求模式\n  //'Sec-Fetch-Site': 'none',\n  // 请求来源\n  //'Sec-Fetch-User': '?1',\n  // 用户触发的请求\n  //'Sec-Fetch-Dest': 'document',\n  // 请求目标\n  //'Sec-CH-UA': '\"Chromium\";v=\"91\", \" Not;A Brand\";v=\"99\"',\n  // 客户端品牌和版本\n  //'Sec-CH-UA-Mobile': '?0',\n  // 是否为移动设备\n  //'Sec-CH-UA-Full-Version': '\"91.0.4472.124\"',\n  // 客户端完整版本\n  //'Sec-CH-UA-Arch': '\"x86\"',\n  // 客户端架构\n  //'Sec-CH-UA-Model': '\"\"',\n  // 客户端设备型号\n  //'Sec-CH-UA-Platform-Version': '\"10.0.0\"',\n  // 客户端平台版本\n  //'Sec-CH-UA-Bitness': '\"64\"',\n  // 客户端位数\n  //'Sec-CH-Viewport-Width': '1920',\n  // 客户端视口宽度\n  //'Sec-CH-Viewport-Height': '1080',\n  // 客户端视口高度\n  //'Access-Control-Request-Method': 'GET',\n  // 跨域请求方法\n  //'Access-Control-Request-Headers': 'Content-Type, Authorization',\n  // 跨域请求头\n};\nvar hd = JSON.stringify(headers);\njava.put('hd',hd)\nhd;\n</js>",
    "jsLib": "function generateUserAgent(deviceOption = '', versionOption = '') {\n    // 用于随机生成UA\n    // 输入的两个参数大小不敏感，\n\n    // 定义常见的浏览器、操作系统和设备类型\n    var browsers = [\n        { name: \"Chrome\", versions: [\"120.0.6099.\", \"119.0.6045.\", \"118.0.5993.\", \"117.0.5938.\"], highCompat: \"80.0.3987.\" },\n        { name: \"Firefox\", versions: [\"120.0.\", \"119.0.\", \"118.0.\", \"117.0.\"], highCompat: \"78.0.\" },\n        { name: \"Safari\", versions: [\"17.0.\", \"16.6.\", \"16.5.\", \"16.4.\"], highCompat: \"13.1.\" },\n        { name: \"Edge\", versions: [\"120.0.2210.\", \"119.0.2151.\", \"118.0.2088.\", \"117.0.2045.\"], highCompat: \"87.0.664.\" }\n    ];\n    var osPC = [\n        \"Windows NT 10.0; Win64; x64\",\n        \"Macintosh; Intel Mac OS X 13_5\",\n        \"Linux x86_64\"\n    ];\n    var osAndroid = [\n        \"Android 14; Mobile\",\n        \"Android 13; Mobile\",\n        \"Android 12; Mobile\",\n        \"Android 11; Mobile\"\n    ];\n    var osIOS = [\n        \"iPhone; CPU iPhone OS 17_0 like Mac OS X\",\n        \"iPhone; CPU iPhone OS 16_6 like Mac OS X\",\n        \"iPhone; CPU iPhone OS 16_5 like Mac OS X\",\n        \"iPhone; CPU iPhone OS 16_4 like Mac OS X\"\n    ];\n    var osHarmonyOS = [\n        \"HarmonyOS 4.0; Mobile\",\n        \"HarmonyOS 3.0; Mobile\",\n        \"HarmonyOS 2.0; Mobile\"\n    ];\n    var osHyperOS = [\n        \"HyperOS 1.0; Mobile\"\n    ];\n    var random = function(arr) {\n        return arr[Math.floor(Math.random() * arr.length)];\n    };\n\n    // 根据 versionOption 获取安卓版本\n    function getAndroidVersion(versionOption) {\n        var highVersion = [\"15\", \"14\", \"13\"]; // 高版本\n        var highCompat = [\"12\", \"11\", \"10\"]; // 高兼容版本\n        var allVersions = highVersion.concat(highCompat); // 所有版本\n\n        switch ((versionOption || '').toLowerCase()) {\n            case '高版本':\n                return highVersion[Math.floor(Math.random() * highVersion.length)];\n            case '高兼容':\n                return highCompat[Math.floor(Math.random() * highCompat.length)];\n            default:\n                return allVersions[Math.floor(Math.random() * allVersions.length)];\n        }\n    }\n\n    // 根据第一个参数生成操作系统和设备类型\n    var os, device;\n    switch ((deviceOption || '').toLowerCase()) {\n        case '电脑':\n            os = random(osPC); // 随机选择 PC 操作系统\n            device = ''; // PC 版不需要设备标识\n            break;\n        case '安卓': // 安卓版\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'Mobile'; // 添加手机设备标识\n            break;\n        case '苹果': // 苹果版\n            os = random(osIOS); // 随机选择 iOS 操作系统\n            device = 'Mobile'; // 添加手机设备标识\n            break;\n        case '鸿蒙': // 鸿蒙版\n            os = random(osHarmonyOS); // 随机选择鸿蒙操作系统\n            device = 'Mobile'; // 添加手机设备标识\n            break;\n        case 'oppo': // OPPO 手机\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'OPPO; ' + random([\"CPH2451\", \"CPH2415\", \"CPH2605\", \"CPH2305\"]) + ' Build/' + random([\"TP1A.220624.014\", \"TP1A.230720.002\", \"TP1A.231005.001\", \"TP1A.210720.011\"]); // 随机选择设备型号和构建版本\n            break;\n        case 'vivo': // Vivo 手机\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'Vivo; ' + random([\"V2243A\", \"V2309A\", \"V2339A\", \"V2166A\"]) + ' Build/' + random([\"SKQ1.220303.001\", \"SKQ1.230723.002\", \"SKQ1.231101.001\", \"SKQ1.210720.012\"]); // 随机选择设备型号和构建版本\n            break;\n        case '小米': // 小米手机\n            var system = random([\"MIUI\", \"HyperOS\"]); // 随机选择 MIUI 或 HyperOS\n            if (system === \"MIUI\") {\n                os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n                device = 'Xiaomi; ' + random([\"2210132C\", \"23127PN0CC\", \"2304FPN6DC\", \"M2103K19C\"]) + ' Build/' + random([\"TKQ1.221114.001\", \"TKQ1.230901.001\", \"TKQ1.231101.001\", \"TKQ1.210720.011\"]); // MIUI 设备标识\n            } else {\n                os = random(osHyperOS); // HyperOS\n                device = 'Xiaomi; ' + random([\"23113RKC6C\", \"23117RK66C\", \"23127PN0CG\", \"Xiaomi 14\"]) + ' Build/' + random([\"HyperOS 1.0.001\", \"HyperOS 1.0.002\", \"HyperOS 1.0.003\", \"HyperOS 1.0.004\"]); // HyperOS 设备标识\n            }\n            break;\n        case '华为': // 华为手机\n            os = random(osHarmonyOS); // 华为手机可能使用鸿蒙系统\n            device = 'Huawei; ' + random([\"NOH-AN00\", \"LIO-AN00\", \"ANA-AN00\", \"DCO-AL00\"]) + ' Build/' + random([\"HarmonyOS 4.0.001\", \"HarmonyOS 3.0.002\", \"HarmonyOS 2.0.003\", \"HarmonyOS 1.0.004\"]); // 随机选择设备型号和构建版本\n            break;\n        case '三星': // 三星手机\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'Samsung; ' + random([\"SM-S9180\", \"SM-S9110\", \"SM-S9060\", \"SM-G9980\"]) + ' Build/' + random([\"SP1A.210812.016\", \"SP1A.230720.002\", \"SP1A.231101.001\", \"SP1A.210720.013\"]); // 随机选择设备型号和构建版本\n            break;\n        case '一加': // 一加手机\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'OnePlus; ' + random([\"CPH2449\", \"CPH2451\", \"CPH2605\", \"IN2020\"]) + ' Build/' + random([\"OP1A.220624.014\", \"OP1A.230720.002\", \"OP1A.231005.001\", \"OP1A.210720.011\"]); // 随机选择设备型号和构建版本\n            break;\n        case '魅族': // 魅族手机\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'Meizu; ' + random([\"MZ2110\", \"MZ2150\", \"MZ2170\", \"M1920\"]) + ' Build/' + random([\"MZ1A.220624.014\", \"MZ1A.230720.002\", \"MZ1A.231005.001\", \"MZ1A.210720.011\"]); // 随机选择设备型号和构建版本\n            break;\n        case '努比亚': // 努比亚手机\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'Nubia; ' + random([\"NX712J\", \"NX713J\", \"NX715J\", \"NX651J\"]) + ' Build/' + random([\"NX1A.220624.014\", \"NX1A.230720.002\", \"NX1A.231005.001\", \"NX1A.210720.011\"]); // 随机选择设备型号和构建版本\n            break;\n        case 'realme': // Realme 手机\n            os = \"Android \" + getAndroidVersion(versionOption) + \"; Mobile\"; // 根据 versionOption 选择安卓版本\n            device = 'Realme; ' + random([\"RMX3708\", \"RMX3710\", \"RMX3720\", \"RMX2200\"]) + ' Build/' + random([\"RM1A.220624.014\", \"RM1A.230720.002\", \"RM1A.231005.001\", \"RM1A.210720.011\"]); // 随机选择设备型号和构建版本\n            break;\n        default: // 全随机\n            var allOS = osPC.concat(osAndroid, osIOS, osHarmonyOS, osHyperOS); // 所有操作系统\n            os = random(allOS); // 随机选择操作系统\n            device = os.indexOf('Android') !== -1 || os.indexOf('iPhone') !== -1 || os.indexOf('HarmonyOS') !== -1 || os.indexOf('HyperOS') !== -1 ? 'Mobile' : ''; // 如果是手机/平板操作系统，添加设备标识\n    }\n\n    // 根据第二个参数生成版本号\n    var browser = random(browsers);\n    var version;\n    switch ((versionOption || '').toLowerCase()) {\n        case '高版本':\n            version = random(browser.versions) + Math.floor(Math.random() * 100); // 高版本\n            break;\n        case '高兼容':\n            version = browser.highCompat + Math.floor(Math.random() * 100); // 高兼容\n            break;\n        default: // 全随机\n            version = (Math.floor(Math.random() * 100) + 1) + \".0.\" + Math.floor(Math.random() * 1000) + \".\" + Math.floor(Math.random() * 100); // 随机版本号\n    }\n\n    // 组合成完整的 UA 字符串\n    return \"Mozilla/5.0 (\" + os + (device ? \"; \" + device : \"\") + \") AppleWebKit/537.36 (KHTML, like Gecko) \" + browser.name + \"/\" + version + \" Safari/537.36\";\n}",
    "lastUpdateTime": 1741903775638,
    "loginCheckJs": "",
    "loginUi": "[{\n        \"name\": \"随机UA参数\",\n        \"type\": \"text\"\n    },\n    {\n        \"name\": \"设置随机UA参数\",\n        \"type\": \"button\",\n        \"action\": \"SZUAZS()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n     \"layout_flexBasisPercent\": 0.39\n    }\n    },\n    {\n        \"name\": \"当前随机UA参数\",\n        \"type\": \"button\",\n        \"action\": \"XSUAZS(true)\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n     \"layout_flexBasisPercent\": 0.39\n    }\n    },\n    {\n        \"name\": \"自定义UA\",\n        \"type\": \"text\"\n    },\n    {\n        \"name\": \"设置自定义UA\",\n        \"type\": \"button\",\n        \"action\": \"SZUA()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n     \"layout_flexBasisPercent\": 0.39\n     }\n     },\n     {\n        \"name\": \"当前自定义UA\",\n        \"type\": \"button\",\n        \"action\": \"XSSZUA()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n     \"layout_flexBasisPercent\": 0.39\n     }\n     },\n     {\n        \"name\": \"切换随机UA模式\",\n        \"type\": \"button\",\n        \"action\": \"SJUAMS()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n     \"layout_flexBasisPercent\": 0.39\n    }\n    },\n     {\n        \"name\": \"切换自定义UA模式\",\n        \"type\": \"button\",\n        \"action\": \"DYUAMS()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n     \"layout_flexBasisPercent\": 0.39\n    }\n    },\n    {\n        \"name\": \"当前模式\",\n        \"type\": \"button\",\n        \"action\": \"MS()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n     \"layout_flexBasisPercent\": 1\n    }\n    }\n]",
    "loginUrl": "function login() {}\n    SZUA = () => {\n        var list = result;\n        var sz = list.自定义UA;\n        sz = sz.match(/Mozilla\\/5.0[^\"'\\}]+/);\n        if (sz) {\n            sz = sz[0];\n        } else {\n            sz = \"\";\n        }\n        if (sz !== \"\") {\n            java.put('sz', sz);\n            java.toast(\"设置成功\");\n        } else {\n        \t    ms=\"sj\";\n            java.put('ms', ms);\n            java.toast(\"UA字符串不合法，已切换为随机UA模式\");\n        }\n    };\n\n    SZUAZS = () => {\n        var list = result;\n        var zs = list.随机UA参数;\n        zs = String(zs);\n        zs = zs.replace(/\"/g, '').replace(/'/g, '').replace(/\\s/g, '');\n        if (zs === \"\") {\n             zs = \"'',''\";\n             java.put('zs', zs);\n            java.toast(\"请输入随机UA参数！！\");\n        } else {\n            if (zs.match(/[^\\u4e00-\\u9fffa-zA-Z',]/)) {\n                zs = \"'',''\";\n                java.put('zs', zs);\n                java.toast(\"输入有误，含有非法字符，格式可见源注释！\");\n            } else {\n                if (zs.match(/^[^,]+,[^,]+$/) || zs.match(/^[^,]+,$/) || zs.match(/^,[^,]+$/)) {\n                    zs = zs.split(\",\").map(item => `'${item}'`).join(\",\");\n                    java.put('zs', zs);\n                    java.toast(\"设置成功\");\n                } else {\n                    zs = \"'',''\";\n                    java.put('zs', zs);\n                    java.toast(\"设置成功\");\n                }\n            }\n        }\n        java.log(\"zs=\" + zs);\n    };\n\n    XSUAZS = () => {\n        var zs = java.get('zs');\n        java.longToast(\"当前随机UA参数为:\" + zs);\n    };\n\n    XSSZUA = () => {\n        var sz = java.get('sz');\n        java.longToast(\"当前自定义UA为:\" + sz);\n    };\n    \n   SJUAMS = () => {\n   \t   var ms=\"sj\";\n        java.put('ms',ms);\n        java.toast(\"已切换为随机UA模式\");\n    };\n\n    DYUAMS = () => {\n    \tsz=java.get('sz');\n    \tsz=sz.match(/Mozilla\\/5.0[^\"'\\}]+/);\n    \tif (sz){sz=sz[0]}else{sz=\"\"}\n    \t if (sz!=\"\"){\n        var ms=\"dy\";\n        java.put('ms',ms);\n        java.toast(\"已切换为自定义UA模式\");\n       }else{\n       var ms=\"sj\";\n        java.put('ms',ms);\n        java.toast(\"检测到自定义UA非法，切换失败\");\n       }\n    };\n    \n   MS = () => {\n   \tms=java.get('ms')\n   \tif (ms==\"sj\"){\n        java.toast(\"当前为随机UA模式\")\n        }else if (ms==\"dy\"){\n        java.toast(\"当前为自定义UA模式\")\n        }else{\n        java.longToast(\"第一次使用请先选择一种模式\")\n        \t}\n    };",
    "respondTime": 180000,
    "ruleBookInfo": {},
    "ruleContent": {
      "content": "@js:\nhd=java.get('hd');\nJC=java.get('JC');\nms=java.get('ms');\nif (result.match(/Just a moment/)&&JC==\"ok\"){ result=java.startBrowserAwait(baseUrl, \"验证\").body();\n}else{\nresult=\"\";\n}\nif (JC==\"ok\"){\n if (!result.match(/Just a moment/)){\nsource.setVariable(hd);\njava.longToast(\"🤓测试成功,请及时将源变量中的ua进行复制🤓\")\nvar text='&nbsp;九梦偷偷瞄了眼👀，对你拿来测试的网站感到很好奇\\n九梦突然发问:\"是🔞的吗？(*¯︶¯*)\"\\n'\n}else{\njava.longToast(\"好像出了点问题，要不换一个兼容性更好的？﹌○﹌\")\nvar text='&nbsp;九梦偷偷瞄了眼👀，虽然测试失败，但依然对你拿来测试的网站产生了浓厚的兴趣\\n九梦突然发问:\"是🔞的吗？(*¯︶¯*)\"\\n'\n}\nif (ms==\"dy\"){\n\tms=\"自定义UA模式\";\n\t}else if (ms==\"sj\"){\n\tms=\"随机UA模式\";\n\t}else{\n\tms=\"未知BUG模式\";\n\t}\ntext=text+\"\\n当前为:\"+ms+\"\\n当前网址:\"+baseUrl+\"\\n当前请求头:\"+hd;\n}else{\njava.longToast(\"请先在登录界面选择模式\");\ntext=\"请先在登录界面选择模式\";\n}\ntext;",
      "sourceRegex": "",
      "title": "",
      "webJs": ""
    },
    "ruleExplore": {},
    "ruleSearch": {
      "bookList": "",
      "bookUrl": "",
      "checkKeyWord": "--https://www.uuks5.com",
      "coverUrl": "",
      "name": ""
    },
    "ruleToc": {},
    "searchUrl": "",
    "weight": 0
  }
]